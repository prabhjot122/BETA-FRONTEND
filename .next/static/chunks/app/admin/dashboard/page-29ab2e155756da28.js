(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5957],{182:()=>{},395:()=>{},2575:()=>{},3692:()=>{},5743:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var t=s(5155);s(2115),s(395);let n=e=>{let{message:a,title:s="Error",onRetry:n,className:i="",variant:r="error"}=e;return(0,t.jsxs)("div",{className:"error-message ".concat(r," ").concat(i),children:[(0,t.jsxs)("div",{className:"error-content",children:[(0,t.jsx)("div",{className:"error-icon",children:(()=>{switch(r){case"warning":return"⚠️";case"info":return"ℹ️";default:return"❌"}})()}),(0,t.jsxs)("div",{className:"error-text",children:[(0,t.jsx)("h3",{className:"error-title",children:s}),(0,t.jsx)("p",{className:"error-description",children:a})]})]}),n&&(0,t.jsx)("button",{onClick:n,className:"error-retry-btn",children:"Try Again"})]})}},5987:()=>{},6093:(e,a,s)=>{"use strict";s.d(a,{default:()=>P});var t=s(5155),n=s(2115),i=s(6947),r=s(5695),l=s(5157),c=s(170),o=s(3376);class d{async getDashboard(){if(c.rY)return await (0,c.G1)(),{overview:{total_users:o.PZ.totalUsers,active_users_24h:o.PZ.activeUsers24h,total_shares_today:o.PZ.totalSharesToday,points_distributed_today:o.PZ.pointsDistributedToday},platform_breakdown:o.PZ.platformBreakdown,growth_metrics:{new_users_7d:o.PZ.growthMetrics.newUsers7d,user_retention_rate:o.PZ.growthMetrics.userRetentionRate,average_session_duration:o.PZ.growthMetrics.averageSessionDuration}};try{return await (0,c.Uj)(()=>c.uE.get("/admin/dashboard"))}catch(e){throw console.error("Failed to fetch admin dashboard:",e),e}}async getShareAnalytics(){if(c.rY)return await (0,c.G1)(),{platform_breakdown:{facebook:{shares:15,points:45,percentage:40},twitter:{shares:10,points:10,percentage:26.7},linkedin:{shares:8,points:40,percentage:21.3},instagram:{shares:5,points:10,percentage:13.3}},timeline:[],summary:{total_shares:38,total_points:105,active_platforms:4,average_points_per_share:2.8}};try{return await (0,c.Uj)(()=>c.uE.get("/admin/analytics"))}catch(e){throw console.error("Failed to fetch admin analytics:",e),e}}async getShareHistory(e){if(c.rY)return await (0,c.G1)(),{shares:[{share_id:1,platform:"facebook",points_earned:3,timestamp:new Date().toISOString()},{share_id:2,platform:"twitter",points_earned:1,timestamp:new Date(Date.now()-36e5).toISOString()}],pagination:{page:1,limit:10,total:2,pages:1}};let a=new URLSearchParams;e.page&&a.append("page",e.page.toString()),e.limit&&a.append("limit",e.limit.toString()),e.platform&&"all"!==e.platform&&a.append("platform",e.platform);try{return await (0,c.Uj)(()=>c.uE.get("/admin/share-history?".concat(a.toString())))}catch(e){throw console.error("Failed to fetch admin share history:",e),e}}async getPlatformStats(){if(c.rY)return await (0,c.G1)(),{platform_stats:{facebook:{shares:15,points:45,percentage:40,unique_users:8},twitter:{shares:10,points:10,percentage:26.7,unique_users:6},linkedin:{shares:8,points:40,percentage:21.3,unique_users:5},instagram:{shares:5,points:10,percentage:13.3,unique_users:3}},summary:{total_shares:38,total_points:105,total_platforms:4}};try{return await (0,c.Uj)(()=>c.uE.get("/admin/platform-stats"))}catch(e){throw console.error("Failed to fetch admin platform stats:",e),e}}async getUsers(e){if(c.rY){await (0,c.G1)();let{page:a=1,limit:s=50,search:t="",sort:n="points"}=e,i=o.rB;if(t.trim()){let e=t.toLowerCase();i=o.rB.filter(a=>a.name.toLowerCase().includes(e)||a.email.toLowerCase().includes(e))}let r=[...i].sort((e,a)=>{switch(n){case"points":return a.points-e.points;case"name":return e.name.localeCompare(a.name);case"email":return e.email.localeCompare(a.email);case"date":return new Date(a.registrationDate).getTime()-new Date(e.registrationDate).getTime();default:return 0}}),l=(a-1)*s;return{users:r.slice(l,l+s).map(e=>({user_id:e.id,name:e.name,email:e.email,points:e.points,rank:e.rank,shares_count:e.sharesCount,status:e.status,last_activity:e.lastActivity,created_at:e.registrationDate})),pagination:{page:a,limit:s,total:r.length,pages:Math.ceil(r.length/s)}}}return(0,c.Uj)(()=>c.uE.get("/admin/users",e))}async sendBulkEmail(e){if(c.rY){await (0,c.G1)(1e3);let a=o.rB.filter(a=>a.points>=e.min_points);return console.log("Mock bulk email sent:",{subject:e.subject,body:e.body,recipients:a.length,minPoints:e.min_points}),{message:"Bulk email sent successfully to ".concat(a.length," users"),recipients:a.length}}try{return await (0,c.Uj)(()=>c.uE.post("/admin/send-bulk-email",e))}catch(e){throw console.error("Failed to send bulk email:",e),e}}async promoteUser(e){if(c.rY){await (0,c.G1)();let a=o.rB.find(a=>a.id===e);if(!a)throw Error("User not found");return a.isAdmin=!0,{message:"User ".concat(a.name," promoted to admin successfully"),user:a.name}}return await (0,c.Uj)(()=>c.uE.post("/admin/promote",{user_id:e}))}async deleteAllUsers(){if(c.rY){await (0,c.G1)();let e=o.rB.filter(e=>!e.isAdmin);if(0===e.length)throw Error("No non-admin users found to delete");let a={export_timestamp:new Date().toISOString(),exported_by_admin:"mock_admin@example.com",total_users_exported:e.length,users:e.map(e=>({id:e.id,name:e.name,email:e.email,total_points:e.points,shares_count:e.sharesCount,default_rank:e.rank,current_rank:e.rank,is_active:"active"===e.status,created_at:e.registrationDate,updated_at:e.lastActivity,share_events:[]}))},s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=URL.createObjectURL(s),n=document.createElement("a");return n.href=t,n.download="users_backup_".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),o.rB.splice(0,o.rB.length,...o.rB.filter(e=>e.isAdmin)),{message:"Successfully deleted ".concat(e.length," users"),export_file:"users_backup_".concat(new Date().toISOString().split("T")[0],".json"),export_data:a}}let e=await (0,c.Uj)(()=>c.uE.post("/admin/delete-all-users"));if(e&&"export_data"in e){let a=new Blob([JSON.stringify(e.export_data,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=e.export_file||"users_backup.json",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}return e}async exportUsers(e,a){if(c.rY){await (0,c.G1)();let s=o.rB;if(null==a?void 0:a.search){let e=a.search.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(e)||a.email.toLowerCase().includes(e))}if((null==a?void 0:a.minPoints)&&(s=s.filter(e=>e.points>=a.minPoints)),(null==a?void 0:a.status)&&(s=s.filter(e=>e.status===a.status)),null==a?void 0:a.dateRange){let e=new Date(a.dateRange.start),t=new Date(a.dateRange.end);s=s.filter(a=>{let s=new Date(a.registrationDate);return s>=e&&s<=t})}return"json"===e?new Blob([JSON.stringify(s.map(e=>({id:e.id,name:e.name,email:e.email,points:e.points,rank:e.rank,shares_count:e.sharesCount,status:e.status,registration_date:e.registrationDate,last_activity:e.lastActivity,is_admin:e.isAdmin})),null,2)],{type:"application/json"}):new Blob([["ID,Name,Email,Points,Rank,Shares,Status,Registration Date,Last Activity,Is Admin",...s.map(e=>[e.id,'"'.concat(e.name,'"'),e.email,e.points,e.rank,e.sharesCount,e.status,e.registrationDate,e.lastActivity,e.isAdmin?"Yes":"No"].join(","))].join("\n")],{type:"text/csv"})}let s=new URLSearchParams;s.append("format",e),(null==a?void 0:a.search)&&s.append("search",a.search),(null==a?void 0:a.minPoints)&&s.append("min_points",a.minPoints.toString()),(null==a?void 0:a.status)&&s.append("status",a.status),(null==a?void 0:a.dateRange)&&(s.append("start_date",a.dateRange.start),s.append("end_date",a.dateRange.end));let t=await fetch("".concat(c.uE.baseURL,"/users/export?").concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!t.ok)throw Error("Export failed");return t.blob()}async getUserById(e){if(c.rY){await (0,c.G1)();let a=o.rB.find(a=>a.id===e);if(!a)throw Error("User not found");return{user_id:a.id,name:a.name,email:a.email,points:a.points,rank:a.rank,shares_count:a.sharesCount,status:a.status,last_activity:a.lastActivity,created_at:a.registrationDate,is_admin:a.isAdmin}}return(0,c.Uj)(()=>c.uE.get("/admin/users/".concat(e)))}async updateUserStatus(e,a){if(c.rY){await (0,c.G1)();let s=o.rB.find(a=>a.id===e);if(!s)throw Error("User not found");return s.status=a,{message:"User ".concat(s.name," ").concat("active"===a?"activated":"deactivated"," successfully")}}return(0,c.Uj)(()=>c.uE.put("/admin/users/".concat(e,"/status"),{status:a}))}async getAdminStats(){if(c.rY){await (0,c.G1)(200);let e=o.rB.filter(e=>"active"===e.status).length,a=o.rB.reduce((e,a)=>e+a.sharesCount,0),s=o.rB.reduce((e,a)=>e+a.points,0),t=Object.entries(o.PZ.platformBreakdown).reduce((e,a)=>{var s;let[t,n]=a;return n.shares>((null==(s=o.PZ.platformBreakdown[e])?void 0:s.shares)||0)?t:e},"linkedin");return{totalUsers:o.rB.length,activeUsers:e,totalShares:a,totalPoints:s,topPlatform:t}}let e=await this.getDashboard();return{totalUsers:e.overview.total_users,activeUsers:e.overview.active_users_24h,totalShares:e.overview.total_shares_today,totalPoints:e.overview.points_distributed_today,topPlatform:Object.entries(e.platform_breakdown).reduce((a,s)=>{var t;let[n,i]=s;return i.shares>((null==(t=e.platform_breakdown[a[0]])?void 0:t.shares)||0)?[n,i]:a},["",{shares:0,percentage:0}])[0]}}}let m=new d;var u=s(339),h=s(5743);class p{async getCampaignSchedule(){if(c.rY){await (0,c.G1)();let e=new Date().toISOString(),a=Object.entries(this.MOCK_CAMPAIGNS).filter(e=>{let[a,s]=e;return"instant"!==s.schedule&&new Date(s.schedule)<=new Date}).map(e=>{let[a,s]=e;return a});return{campaigns:this.MOCK_CAMPAIGNS,current_time:e,due_campaigns:a}}return(0,c.Uj)(()=>c.uE.get("/campaigns/schedule"))}async sendCampaign(e){if(c.rY){if(await (0,c.G1)(1e3),!this.MOCK_CAMPAIGNS[e.campaign_type])throw Error("Invalid campaign type: ".concat(e.campaign_type));let a="mock-task-"+Date.now();return e.user_email&&e.user_name?{success:!0,message:"Campaign '".concat(e.campaign_type,"' queued for ").concat(e.user_email),task_id:a,details:{campaign_type:e.campaign_type,recipient:e.user_email,send_type:"individual"}}:{success:!0,message:"Bulk campaign '".concat(e.campaign_type,"' queued for all users"),task_id:a,details:{campaign_type:e.campaign_type,send_type:"bulk"}}}return(0,c.Uj)(()=>c.uE.post("/campaigns/send",e))}async getCampaignStatus(e){if(c.rY){await (0,c.G1)();let a=this.MOCK_CAMPAIGNS[e];if(!a)throw Error("Invalid campaign type: ".concat(e));let s=new Date,t="instant"===a.schedule?s:new Date(a.schedule),n="instant"===a.schedule||s>=t;return{campaign_type:e,subject:a.subject,schedule:a.schedule,status:a.status,is_due:n,current_time:s.toISOString()}}return(0,c.Uj)(()=>c.uE.get("/campaigns/status/".concat(e)))}async sendTestCampaign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"welcome";if(c.rY){if(await (0,c.G1)(800),!this.MOCK_CAMPAIGNS[e])throw Error("Invalid campaign type: ".concat(e));return{success:!0,message:"Test campaign '".concat(e,"' sent to Sahil Saurav"),task_id:"mock-test-task-"+Date.now(),details:{campaign_type:e,recipient:"sahilsaurav2507@gmail.com",send_type:"individual"}}}return(0,c.Uj)(()=>c.uE.post("/campaigns/test-sahil",{campaign_type:e}))}async getNewUserCampaignsPreview(){if(c.rY){await (0,c.G1)();let e=new Date,a=Object.entries(this.MOCK_CAMPAIGNS).filter(a=>{let[s,t]=a;return"welcome"!==s&&"instant"!==t.schedule&&new Date(t.schedule)>e}).map(a=>{let[s,t]=a,n=Math.ceil((new Date(t.schedule).getTime()-e.getTime())/864e5);return{campaign_type:s,subject:t.subject,schedule:t.schedule,days_from_now:n}}),s=Object.entries(this.MOCK_CAMPAIGNS).filter(a=>{let[s,t]=a;return"welcome"!==s&&"instant"!==t.schedule&&new Date(t.schedule)<=e}).map(e=>{let[a,s]=e;return a});return{instant_email:{campaign_type:"welcome",subject:this.MOCK_CAMPAIGNS.welcome.subject,will_be_sent:!0,note:"Always sent immediately on registration"},future_campaigns:{count:a.length,campaigns:a,note:"These will be sent automatically on scheduled dates"},past_campaigns:{count:s.length,campaigns:s,note:"These will NOT be sent to new users (backdated)"},current_time:e.toISOString()}}return(0,c.Uj)(()=>c.uE.get("/campaigns/new-user-campaigns"))}getCampaignTypes(){return Object.keys(this.MOCK_CAMPAIGNS)}formatSchedule(e){if("instant"===e)return"Instant (on registration)";try{return new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})+" IST"}catch(a){return e}}isCampaignDue(e){if("instant"===e)return!0;try{return new Date(e)<=new Date}catch(e){return!1}}getStatusColor(e,a){switch(e){case"active":return a?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800";case"scheduled":return a?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}constructor(){this.MOCK_CAMPAIGNS={welcome:{subject:"✨ Welcome Aboard, LawVriksh Founding Member!",schedule:"instant",status:"active"},search_engine:{subject:"\uD83D\uDD0D Your Search Engine is Ready!",schedule:"2025-07-26T14:00:00+05:30",status:"scheduled"},portfolio_builder:{subject:"\uD83D\uDCC1 Portfolio Builder Complete!",schedule:"2025-07-30T10:30:00+05:30",status:"scheduled"},platform_complete:{subject:"\uD83D\uDE80 LawVriksh Platform Launch!",schedule:"2025-08-03T09:00:00+05:30",status:"scheduled"}}}}let g=new p;s(5987);let v=()=>{let[e,a]=(0,n.useState)(null),[s,i]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[p,v]=(0,n.useState)("schedule"),[j,x]=(0,n.useState)("welcome"),[b,f]=(0,n.useState)("bulk"),[w,N]=(0,n.useState)(""),[y,k]=(0,n.useState)("");(0,n.useEffect)(()=>{_()},[]);let _=async()=>{try{l(!0),o(null);let[e,s]=await Promise.all([g.getCampaignSchedule(),g.getNewUserCampaignsPreview()]);a(e),i(s)}catch(e){o(e instanceof Error?e.message:"Failed to load campaign data")}finally{l(!1)}},S=async()=>{if(j)try{m(j),o(null);let e={campaign_type:j,..."individual"===b&&{user_email:w,user_name:y}},a=await g.sendCampaign(e);if(a.success)alert("✅ ".concat(a.message)),N(""),k("");else throw Error(a.message)}catch(e){o(e instanceof Error?e.message:"Failed to send campaign")}finally{m(null)}},C=async e=>{try{m(e),o(null);let a=await g.sendTestCampaign(e);if(a.success)alert("✅ Test campaign sent: ".concat(a.message));else throw Error(a.message)}catch(e){o(e instanceof Error?e.message:"Failed to send test campaign")}finally{m(null)}};return r?(0,t.jsx)("div",{className:"campaign-loading",children:(0,t.jsx)(u.A,{})}):(0,t.jsxs)("div",{className:"campaign-management",children:[(0,t.jsx)("div",{className:"campaign-tabs",children:(0,t.jsx)("nav",{children:[{key:"schedule",label:"Campaign Schedule"},{key:"send",label:"Send Campaign"},{key:"preview",label:"New User Preview"}].map(e=>(0,t.jsx)("button",{onClick:()=>v(e.key),className:"campaign-tab ".concat(p===e.key?"active":""),children:e.label},e.key))})}),(0,t.jsxs)("div",{className:"campaign-content",children:[c&&(0,t.jsx)(h.A,{message:c}),"schedule"===p&&e&&(0,t.jsxs)("div",{className:"campaign-schedule-section",children:[(0,t.jsxs)("div",{className:"campaign-schedule-header",children:[(0,t.jsx)("h3",{className:"campaign-schedule-title",children:"Campaign Schedule Overview"}),(0,t.jsx)("button",{onClick:_,className:"campaign-refresh-button",children:"Refresh"})]}),(0,t.jsx)("div",{className:"campaign-schedule-grid",children:Object.entries(e.campaigns).map(e=>{let[a,s]=e,n=g.isCampaignDue(s.schedule);return(0,t.jsx)("div",{className:"campaign-schedule-item",children:(0,t.jsxs)("div",{className:"campaign-schedule-item-header",children:[(0,t.jsxs)("div",{className:"campaign-schedule-item-content",children:[(0,t.jsxs)("div",{className:"campaign-schedule-item-title-section",children:[(0,t.jsx)("h4",{className:"campaign-schedule-item-title",children:a.replace("_"," ")}),(0,t.jsx)("span",{className:"campaign-status-badge ".concat(s.status),children:s.status}),n&&(0,t.jsx)("span",{className:"campaign-due-badge",children:"Due"})]}),(0,t.jsx)("p",{className:"campaign-schedule-item-subject",children:s.subject}),(0,t.jsxs)("p",{className:"campaign-schedule-item-schedule",children:["Schedule: ",g.formatSchedule(s.schedule)]})]}),(0,t.jsx)("button",{onClick:()=>C(a),disabled:d===a,className:"campaign-test-button",children:d===a?"Sending...":"Test Send"})]})},a)})}),e.due_campaigns.length>0&&(0,t.jsxs)("div",{className:"campaign-due-campaigns",children:[(0,t.jsx)("h4",{className:"campaign-due-campaigns-title",children:"Due Campaigns"}),(0,t.jsxs)("p",{className:"campaign-due-campaigns-text",children:["The following campaigns are due to be sent: ",e.due_campaigns.join(", ")]})]})]}),"send"===p&&(0,t.jsxs)("div",{className:"campaign-send-section",children:[(0,t.jsx)("h3",{className:"campaign-send-title",children:"Send Campaign Manually"}),(0,t.jsxs)("div",{className:"campaign-send-grid",children:[(0,t.jsxs)("div",{className:"campaign-send-form-group",children:[(0,t.jsx)("label",{className:"campaign-send-label",children:"Campaign Type"}),(0,t.jsx)("select",{value:j,onChange:e=>x(e.target.value),className:"campaign-send-select",children:g.getCampaignTypes().map(e=>(0,t.jsx)("option",{value:e,children:e.replace("_"," ").toUpperCase()},e))})]}),(0,t.jsxs)("div",{className:"campaign-send-form-group",children:[(0,t.jsx)("label",{className:"campaign-send-label",children:"Send Type"}),(0,t.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"campaign-send-select",children:[(0,t.jsx)("option",{value:"bulk",children:"Bulk (All Users)"}),(0,t.jsx)("option",{value:"individual",children:"Individual User"})]})]})]}),"individual"===b&&(0,t.jsxs)("div",{className:"campaign-send-grid",children:[(0,t.jsxs)("div",{className:"campaign-send-form-group",children:[(0,t.jsx)("label",{className:"campaign-send-label",children:"User Email"}),(0,t.jsx)("input",{type:"email",value:w,onChange:e=>N(e.target.value),placeholder:"user@example.com",className:"campaign-send-input"})]}),(0,t.jsxs)("div",{className:"campaign-send-form-group",children:[(0,t.jsx)("label",{className:"campaign-send-label",children:"User Name"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>k(e.target.value),placeholder:"John Doe",className:"campaign-send-input"})]})]}),(0,t.jsx)("button",{onClick:S,disabled:null!==d||"individual"===b&&(!w||!y),className:"campaign-send-button",children:d?"Sending...":"Send ".concat("bulk"===b?"Bulk":"Individual"," Campaign")})]}),"preview"===p&&s&&(0,t.jsxs)("div",{className:"campaign-preview-section",children:[(0,t.jsx)("h3",{className:"campaign-preview-title",children:"New User Campaign Preview"}),(0,t.jsxs)("div",{className:"campaign-preview-grid",children:[(0,t.jsxs)("div",{className:"campaign-preview-card instant",children:[(0,t.jsx)("h4",{className:"campaign-preview-card-title",children:"Instant Email"}),(0,t.jsx)("p",{className:"campaign-preview-card-note",children:(0,t.jsx)("strong",{children:s.instant_email.subject})}),(0,t.jsx)("p",{className:"campaign-preview-card-note",children:s.instant_email.note})]}),(0,t.jsxs)("div",{className:"campaign-preview-card future",children:[(0,t.jsxs)("h4",{className:"campaign-preview-card-title",children:["Future Campaigns (",s.future_campaigns.count,")"]}),(0,t.jsx)("p",{className:"campaign-preview-card-note",children:s.future_campaigns.note}),(0,t.jsx)("div",{className:"campaign-preview-campaigns-grid",children:s.future_campaigns.campaigns.map(e=>(0,t.jsx)("div",{className:"campaign-preview-campaign-item",children:(0,t.jsxs)("div",{className:"campaign-preview-campaign-header",children:[(0,t.jsxs)("div",{className:"campaign-preview-campaign-content",children:[(0,t.jsx)("p",{className:"campaign-preview-campaign-subject",children:e.subject}),(0,t.jsx)("p",{className:"campaign-preview-campaign-schedule",children:g.formatSchedule(e.schedule)})]}),(0,t.jsxs)("span",{className:"campaign-preview-campaign-badge",children:[e.days_from_now," days"]})]})},e.campaign_type))})]}),s.past_campaigns.count>0&&(0,t.jsxs)("div",{className:"campaign-preview-card past",children:[(0,t.jsxs)("h4",{className:"campaign-preview-card-title",children:["Past Campaigns (",s.past_campaigns.count,")"]}),(0,t.jsx)("p",{className:"campaign-preview-card-note",children:s.past_campaigns.note}),(0,t.jsx)("p",{className:"campaign-preview-past-text",children:s.past_campaigns.campaigns.join(", ")})]})]})]})]})]})};s(182);let j=()=>{let[e,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[r,l]=(0,n.useState)(null),[c,o]=(0,n.useState)({page:1,limit:20,total:0,pages:0}),[d,p]=(0,n.useState)({search:"",status:"all",minPoints:0,sortBy:"points",sortOrder:"desc",dateRange:{start:"",end:""}}),[g,v]=(0,n.useState)(new Set),[j,x]=(0,n.useState)(!1),[b,f]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),[y,k]=(0,n.useState)(!1),[_,S]=(0,n.useState)(null),C=(0,n.useCallback)(async()=>{try{i(!0),l(null);let e={page:c.page,limit:c.limit,search:d.search,sort:d.sortBy},s=await m.getUsers(e),t=s.users;if("all"!==d.status&&(t=t.filter(e=>e.status===d.status)),d.minPoints>0&&(t=t.filter(e=>e.points>=d.minPoints)),d.dateRange.start&&d.dateRange.end){let e=new Date(d.dateRange.start),a=new Date(d.dateRange.end);t=t.filter(s=>{let t=new Date(s.created_at);return t>=e&&t<=a})}t.sort((e,a)=>{let s,t;switch(d.sortBy){case"name":s=e.name.toLowerCase(),t=a.name.toLowerCase();break;case"email":s=e.email.toLowerCase(),t=a.email.toLowerCase();break;case"points":default:s=e.points,t=a.points;break;case"date":s=new Date(e.created_at),t=new Date(a.created_at)}return"asc"===d.sortOrder?s>t?1:-1:s<t?1:-1}),a(t),o(e=>({...e,total:s.pagination.total,pages:s.pagination.pages}))}catch(e){l(e instanceof Error?e.message:"Failed to load users")}finally{i(!1)}},[c.page,c.limit,d]);(0,n.useEffect)(()=>{C()},[C]);let P=(e,a)=>{p(s=>({...s,[e]:a})),o(e=>({...e,page:1}))},E=async e=>{try{f(!0);let a={search:d.search||void 0,minPoints:d.minPoints>0?d.minPoints:void 0,status:"all"!==d.status?d.status:void 0,dateRange:d.dateRange.start&&d.dateRange.end?d.dateRange:void 0},s=await m.exportUsers(e,a),t=window.URL.createObjectURL(s),n=document.createElement("a");n.href=t,n.download="users_export_".concat(new Date().toISOString().split("T")[0],".").concat(e),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t),x(!1)}catch(e){l(e instanceof Error?e.message:"Export failed")}finally{f(!1)}},A=async(e,s)=>{try{let t="active"===s?"inactive":"active";await m.updateUserStatus(e,t),a(a=>a.map(a=>a.user_id===e?{...a,status:t}:a))}catch(e){l(e instanceof Error?e.message:"Failed to update user status")}},U=async e=>{try{await m.promoteUser(e),a(a=>a.map(a=>a.user_id===e?{...a,is_admin:!0}:a)),alert("User promoted to admin successfully!")}catch(e){l(e instanceof Error?e.message:"Failed to promote user")}},D=async()=>{try{k(!0),l(null);let e=await m.deleteAllUsers();a([]),o(e=>({...e,total:0,pages:0})),alert("".concat(e.message,"\nData exported to: ").concat(e.export_file)),N(!1),await C()}catch(e){l(e instanceof Error?e.message:"Failed to delete all users")}finally{k(!1)}},R=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return s&&0===e.length?(0,t.jsx)("div",{className:"user-management-loading",children:(0,t.jsx)(u.A,{})}):(0,t.jsxs)("div",{className:"user-management-container",children:[(0,t.jsxs)("div",{className:"user-management-header",children:[(0,t.jsxs)("div",{className:"user-management-header-content",children:[(0,t.jsx)("h3",{className:"user-management-title",children:"Enhanced User Management"}),(0,t.jsxs)("div",{className:"user-management-actions",children:[(0,t.jsx)("button",{onClick:()=>x(!0),className:"user-management-button primary",children:"Export Users"}),(0,t.jsx)("button",{onClick:()=>N(!0),className:"user-management-button danger",children:"Delete All Users"}),(0,t.jsx)("button",{onClick:C,className:"user-management-button secondary",children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"user-management-filters",children:[(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"Search"}),(0,t.jsx)("input",{type:"text",value:d.search,onChange:e=>P("search",e.target.value),placeholder:"Name or email...",className:"user-management-input"})]}),(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"Status"}),(0,t.jsxs)("select",{value:d.status,onChange:e=>P("status",e.target.value),className:"user-management-select",children:[(0,t.jsx)("option",{value:"all",children:"All Users"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"Min Points"}),(0,t.jsx)("input",{type:"number",value:d.minPoints,onChange:e=>P("minPoints",parseInt(e.target.value)||0),min:"0",className:"user-management-input"})]}),(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"Sort By"}),(0,t.jsxs)("select",{value:d.sortBy,onChange:e=>P("sortBy",e.target.value),className:"user-management-select",children:[(0,t.jsx)("option",{value:"points",children:"Points"}),(0,t.jsx)("option",{value:"name",children:"Name"}),(0,t.jsx)("option",{value:"email",children:"Email"}),(0,t.jsx)("option",{value:"date",children:"Registration Date"})]})]})]}),(0,t.jsxs)("div",{className:"user-management-filters-extended",children:[(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:d.dateRange.start,onChange:e=>P("dateRange",{...d.dateRange,start:e.target.value}),className:"user-management-input"})]}),(0,t.jsxs)("div",{className:"user-management-filter-group",children:[(0,t.jsx)("label",{className:"user-management-filter-label",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:d.dateRange.end,onChange:e=>P("dateRange",{...d.dateRange,end:e.target.value}),className:"user-management-input"})]}),(0,t.jsx)("div",{className:"user-management-filter-actions",children:(0,t.jsx)("button",{onClick:()=>P("sortOrder","asc"===d.sortOrder?"desc":"asc"),className:"user-management-button secondary",children:"asc"===d.sortOrder?"↑ Ascending":"↓ Descending"})})]})]}),r&&(0,t.jsx)("div",{style:{padding:"1rem"},children:(0,t.jsx)(h.A,{message:r})}),(0,t.jsxs)("div",{className:"user-management-content",children:[g.size>0&&(0,t.jsx)("div",{className:"user-management-selection-info",children:(0,t.jsxs)("p",{className:"user-management-selection-text",children:[g.size," user(s) selected"]})}),(0,t.jsx)("div",{className:"user-management-table-wrapper",children:(0,t.jsxs)("table",{className:"user-management-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:(0,t.jsx)("input",{type:"checkbox",checked:g.size===e.length&&e.length>0,onChange:()=>{g.size===e.length?v(new Set):v(new Set(e.map(e=>e.user_id)))},className:"user-management-checkbox"})}),(0,t.jsx)("th",{children:"User"}),(0,t.jsx)("th",{children:"Points & Rank"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Registration"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("input",{type:"checkbox",checked:g.has(e.user_id),onChange:()=>(e=>{v(a=>{let s=new Set(a);return s.has(e)?s.delete(e):s.add(e),s})})(e.user_id),className:"user-management-checkbox"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"user-cell",children:[(0,t.jsx)("div",{className:"user-avatar",children:(0,t.jsx)("div",{className:"user-avatar-circle",children:(0,t.jsx)("span",{className:"user-avatar-initial",children:e.name.charAt(0).toUpperCase()})})}),(0,t.jsxs)("div",{className:"user-info",children:[(0,t.jsx)("div",{className:"user-name",children:e.name}),(0,t.jsx)("div",{className:"user-email",children:e.email}),e.is_admin&&(0,t.jsx)("span",{className:"user-admin-badge",children:"Admin"})]})]})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"points-cell",children:[(0,t.jsxs)("div",{className:"points-value",children:[e.points," points"]}),(0,t.jsxs)("div",{className:"points-details",children:["Rank: ",e.rank||"N/A"," • ",e.shares_count," shares"]})]})}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"status-badge ".concat("active"===e.status?"active":"inactive"),children:e.status})}),(0,t.jsx)("td",{className:"date-cell",children:R(e.created_at)}),(0,t.jsxs)("td",{className:"actions-cell",children:[(0,t.jsx)("button",{onClick:()=>S(e),className:"action-link",children:"View"}),(0,t.jsx)("button",{onClick:()=>A(e.user_id,e.status),className:"action-link warning",children:"active"===e.status?"Deactivate":"Activate"}),!e.is_admin&&(0,t.jsx)("button",{onClick:()=>U(e.user_id),className:"action-link purple",children:"Promote"})]})]},e.user_id))})]})}),(0,t.jsxs)("div",{className:"user-management-pagination",children:[(0,t.jsxs)("div",{className:"pagination-info",children:["Showing ",(c.page-1)*c.limit+1," to ",Math.min(c.page*c.limit,c.total)," of ",c.total," users"]}),(0,t.jsxs)("div",{className:"pagination-controls",children:[(0,t.jsx)("button",{onClick:()=>o(e=>({...e,page:Math.max(1,e.page-1)})),disabled:1===c.page,className:"pagination-button",children:"Previous"}),(0,t.jsxs)("span",{className:"pagination-current",children:["Page ",c.page," of ",c.pages]}),(0,t.jsx)("button",{onClick:()=>o(e=>({...e,page:Math.min(e.pages,e.page+1)})),disabled:c.page===c.pages,className:"pagination-button",children:"Next"})]})]})]}),j&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsx)("div",{className:"modal-container",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("h3",{className:"modal-title",children:"Export Users"}),(0,t.jsx)("p",{className:"modal-text",children:"Export users with current filters applied. Choose your preferred format:"}),(0,t.jsxs)("div",{className:"modal-actions",children:[(0,t.jsx)("button",{onClick:()=>E("csv"),disabled:b,className:"modal-button primary",children:b?"Exporting...":"Export CSV"}),(0,t.jsx)("button",{onClick:()=>E("json"),disabled:b,className:"modal-button secondary",children:b?"Exporting...":"Export JSON"})]}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"modal-close-button",children:"Cancel"})]})})}),w&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsx)("div",{className:"modal-container",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("h3",{className:"modal-title",children:"⚠️ Delete All Users"}),(0,t.jsxs)("div",{className:"modal-text",children:[(0,t.jsx)("p",{children:(0,t.jsx)("strong",{children:"This action will permanently delete ALL non-admin users and their registration data!"})}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"What will be deleted:"})," User accounts, share events, and points"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"What will be preserved:"})," Feedback responses (anonymized)"]}),(0,t.jsx)("p",{children:"Before deletion, all user data will be automatically exported to a JSON file for backup."}),(0,t.jsx)("p",{children:"This action cannot be undone. Are you sure you want to proceed?"})]}),(0,t.jsxs)("div",{className:"modal-actions",children:[(0,t.jsx)("button",{onClick:D,disabled:y,className:"modal-button danger",children:y?"Deleting & Exporting...":"Yes, Delete All Users"}),(0,t.jsx)("button",{onClick:()=>N(!1),disabled:y,className:"modal-button secondary",children:"Cancel"})]})]})})}),_&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsx)("div",{className:"modal-container",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("h3",{className:"modal-title",children:"User Details"}),(0,t.jsxs)("div",{className:"user-detail-grid",children:[(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Name"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.name})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Email"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.email})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Points"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.points})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Rank"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.rank||"N/A"})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Shares"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.shares_count})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Status"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.status})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Registration Date"}),(0,t.jsx)("p",{className:"user-detail-value",children:R(_.created_at)})]}),(0,t.jsxs)("div",{className:"user-detail-item",children:[(0,t.jsx)("label",{className:"user-detail-label",children:"Last Activity"}),(0,t.jsx)("p",{className:"user-detail-value",children:_.last_activity?R(_.last_activity):"N/A"})]})]}),(0,t.jsx)("button",{onClick:()=>S(null),className:"modal-close-button",children:"Close"})]})})})]})};class x{async getShareHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c.rY){await (0,c.G1)();let{page:a=1,limit:s=20,platform:t,dateRange:n}=e,i=[...this.MOCK_SHARE_HISTORY];if(t&&(i=i.filter(e=>e.platform===t)),n){let e=new Date(n.start),a=new Date(n.end);i=i.filter(s=>{let t=new Date(s.timestamp);return t>=e&&t<=a})}i.sort((e,a)=>new Date(a.timestamp).getTime()-new Date(e.timestamp).getTime());let r=(a-1)*s,l=i.slice(r,r+s),o=i.reduce((e,a)=>e+a.points_earned,0),d=[...new Set(i.map(e=>e.platform))];return{shares:l,pagination:{page:a,limit:s,total:i.length,pages:Math.ceil(i.length/s)},summary:{total_shares:i.length,total_points_earned:o,platforms_used:d}}}let a=new URLSearchParams;return e.page&&a.append("page",e.page.toString()),e.limit&&a.append("limit",e.limit.toString()),e.platform&&a.append("platform",e.platform),e.dateRange&&(a.append("start_date",e.dateRange.start),a.append("end_date",e.dateRange.end)),(0,c.Uj)(()=>c.uE.get("/shares/history?".concat(a)))}async getShareAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c.rY){await (0,c.G1)();let a={...this.MOCK_ANALYTICS};if(e.platform){let s=a.platform_breakdown[e.platform];s&&(a.platform_breakdown={[e.platform]:s},a.summary={total_shares:s.shares,total_points:s.points,active_platforms:1,average_points_per_share:s.points/s.shares})}return a}let a=new URLSearchParams;return e.period&&a.append("period",e.period),e.platform&&a.append("platform",e.platform),(0,c.Uj)(()=>c.uE.get("/shares/analytics?".concat(a)))}async getAvailablePlatforms(){return c.rY?(await (0,c.G1)(200),["facebook","twitter","linkedin","instagram","whatsapp"]):(0,c.Uj)(()=>c.uE.get("/shares/platforms"))}async getPlatformStatistics(){return c.rY?(await (0,c.G1)(),{linkedin:{total_shares:150,total_points:750,unique_users:120,average_points_per_user:6.25},facebook:{total_shares:200,total_points:600,unique_users:180,average_points_per_user:3.33},twitter:{total_shares:300,total_points:300,unique_users:250,average_points_per_user:1.2},instagram:{total_shares:100,total_points:200,unique_users:90,average_points_per_user:2.22},whatsapp:{total_shares:50,total_points:0,unique_users:45,average_points_per_user:0}}):(0,c.Uj)(()=>c.uE.get("/admin/platform-statistics"))}async getShareTrends(e){if(c.rY){await (0,c.G1)();let{period:a,days:s=30}=e,t=[],n=new Date;for(let e=s-1;e>=0;e--){let s=new Date(n);s.setDate(s.getDate()-e),"daily"===a?t.push(s.toLocaleDateString("en-US",{month:"short",day:"numeric"})):"weekly"===a?t.push("Week ".concat(Math.ceil(s.getDate()/7))):t.push(s.toLocaleDateString("en-US",{month:"short"}))}let i=["#0077B5","#1877F2","#1DA1F2","#E4405F"],r=["linkedin","facebook","twitter","instagram"].map((e,a)=>({platform:e,data:t.map(()=>Math.floor(20*Math.random())+1),color:i[a]}));return{labels:t,datasets:r}}let a=new URLSearchParams;return a.append("period",e.period),e.days&&a.append("days",e.days.toString()),(0,c.Uj)(()=>c.uE.get("/shares/trends?".concat(a)))}formatPlatformName(e){return({facebook:"Facebook",twitter:"Twitter",linkedin:"LinkedIn",instagram:"Instagram",whatsapp:"WhatsApp"})[e]||e.charAt(0).toUpperCase()+e.slice(1)}getPlatformColor(e){return({facebook:"#1877F2",twitter:"#1DA1F2",linkedin:"#0077B5",instagram:"#E4405F",whatsapp:"#25D366"})[e]||"#6B7280"}getPlatformIcon(e){return({facebook:"\uD83D\uDCD8",twitter:"\uD83D\uDC26",linkedin:"\uD83D\uDCBC",instagram:"\uD83D\uDCF7",whatsapp:"\uD83D\uDCAC"})[e]||"\uD83D\uDCF1"}calculateEngagementMetrics(e){let{platform_breakdown:a,summary:s}=e;if(!a||!s)return{mostActivePlatform:{name:"",shares:0},highestEarningPlatform:{name:"",points:0},mostEfficientPlatform:{platform:"",efficiency:0},totalEngagement:0,averagePointsPerShare:0};let t=Object.entries(a);if(0===t.length)return{mostActivePlatform:{name:"",shares:0},highestEarningPlatform:{name:"",points:0},mostEfficientPlatform:{platform:"",efficiency:0},totalEngagement:s.total_shares||0,averagePointsPerShare:s.average_points_per_share||0};let n=t.reduce((e,s)=>{var t;let[n,i]=s;return i.shares>((null==(t=a[e[0]])?void 0:t.shares)||0)?[n,i]:e},["",{shares:0,points:0,percentage:0}]),i=t.reduce((e,s)=>{var t;let[n,i]=s;return i.points>((null==(t=a[e[0]])?void 0:t.points)||0)?[n,i]:e},["",{shares:0,points:0,percentage:0}]),r=t.map(e=>{let[a,s]=e;return{platform:a,efficiency:s.shares>0?s.points/s.shares:0}}).sort((e,a)=>a.efficiency-e.efficiency);return{mostActivePlatform:{name:n[0],shares:n[1].shares},highestEarningPlatform:{name:i[0],points:i[1].points},mostEfficientPlatform:r[0]||{platform:"",efficiency:0},totalEngagement:s.total_shares||0,averagePointsPerShare:s.average_points_per_share||0}}constructor(){this.MOCK_SHARE_HISTORY=[{share_id:1,platform:"linkedin",points_earned:5,timestamp:"2024-01-15T10:30:00Z"},{share_id:2,platform:"facebook",points_earned:3,timestamp:"2024-01-14T15:45:00Z"},{share_id:3,platform:"twitter",points_earned:1,timestamp:"2024-01-13T09:20:00Z"},{share_id:4,platform:"instagram",points_earned:2,timestamp:"2024-01-12T14:15:00Z"},{share_id:5,platform:"linkedin",points_earned:0,timestamp:"2024-01-11T11:30:00Z"}],this.MOCK_ANALYTICS={platform_breakdown:{linkedin:{shares:2,points:5,percentage:45.5,first_share_date:"2024-01-11T11:30:00Z",last_share_date:"2024-01-15T10:30:00Z"},facebook:{shares:1,points:3,percentage:27.3,first_share_date:"2024-01-14T15:45:00Z",last_share_date:"2024-01-14T15:45:00Z"},twitter:{shares:1,points:1,percentage:9.1,first_share_date:"2024-01-13T09:20:00Z",last_share_date:"2024-01-13T09:20:00Z"},instagram:{shares:1,points:2,percentage:18.2,first_share_date:"2024-01-12T14:15:00Z",last_share_date:"2024-01-12T14:15:00Z"}},timeline:[{date:"2024-01-11",shares:1,points:0},{date:"2024-01-12",shares:1,points:2},{date:"2024-01-13",shares:1,points:1},{date:"2024-01-14",shares:1,points:3},{date:"2024-01-15",shares:1,points:5}],summary:{total_shares:5,total_points:11,active_platforms:4,average_points_per_share:2.2}}}}let b=new x;var f=s(8153);s(7175);let w=()=>{let e=(0,r.usePathname)(),[a,s]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null),d=e.includes("/admin");(0,n.useEffect)(()=>{p()},[]);let p=async()=>{try{let e;l(!0),o(null),e=d?await m.getShareAnalytics():await f.y.getEnhancedAnalytics(),s(e)}catch(e){console.error("Analytics loading error:",e),o(e instanceof Error?e.message:"Failed to load analytics")}finally{l(!1)}},g=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(i&&!a)return(0,t.jsx)("div",{className:"share-analytics-loading",children:(0,t.jsx)(u.A,{})});let v=(()=>{if(!a||!a.platform_breakdown||!a.summary)return null;try{return b.calculateEngagementMetrics(a)}catch(e){return console.error("Error calculating engagement metrics:",e),null}})();return(0,t.jsxs)("div",{className:"share-analytics-container",children:[(0,t.jsx)("div",{className:"share-analytics-header",children:(0,t.jsx)("div",{className:"share-analytics-header-content",children:(0,t.jsx)("h3",{className:"share-analytics-title",children:"Share Analytics Overview"})})}),(0,t.jsxs)("div",{className:"share-analytics-content",children:[c&&(0,t.jsx)(h.A,{message:c}),a&&a.summary&&(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsxs)("div",{className:"summary-cards",children:[(0,t.jsxs)("div",{className:"summary-card blue",children:[(0,t.jsx)("h4",{className:"summary-card-title",children:"Total Shares"}),(0,t.jsx)("p",{className:"summary-card-value",children:a.summary.total_shares||0})]}),(0,t.jsxs)("div",{className:"summary-card green",children:[(0,t.jsx)("h4",{className:"summary-card-title",children:"Total Points"}),(0,t.jsx)("p",{className:"summary-card-value",children:a.summary.total_points||0})]}),(0,t.jsxs)("div",{className:"summary-card purple",children:[(0,t.jsx)("h4",{className:"summary-card-title",children:"Active Platforms"}),(0,t.jsx)("p",{className:"summary-card-value",children:a.summary.active_platforms||0})]}),(0,t.jsxs)("div",{className:"summary-card orange",children:[(0,t.jsx)("h4",{className:"summary-card-title",children:"Avg Points/Share"}),(0,t.jsx)("p",{className:"summary-card-value",children:(a.summary.average_points_per_share||0).toFixed(1)})]})]}),v&&(0,t.jsxs)("div",{className:"engagement-insights",children:[(0,t.jsx)("h4",{className:"engagement-insights-title",children:"Engagement Insights"}),(0,t.jsxs)("div",{className:"engagement-insights-grid",children:[(0,t.jsxs)("div",{className:"engagement-insight-item",children:[(0,t.jsx)("span",{className:"engagement-insight-label",children:"Most Active Platform:"}),(0,t.jsxs)("p",{className:"engagement-insight-value",children:[b.formatPlatformName(v.mostActivePlatform.name),"(",v.mostActivePlatform.shares," shares)"]})]}),(0,t.jsxs)("div",{className:"engagement-insight-item",children:[(0,t.jsx)("span",{className:"engagement-insight-label",children:"Highest Earning:"}),(0,t.jsxs)("p",{className:"engagement-insight-value",children:[b.formatPlatformName(v.highestEarningPlatform.name),"(",v.highestEarningPlatform.points," points)"]})]}),(0,t.jsxs)("div",{className:"engagement-insight-item",children:[(0,t.jsx)("span",{className:"engagement-insight-label",children:"Most Efficient:"}),(0,t.jsxs)("p",{className:"engagement-insight-value",children:[b.formatPlatformName(v.mostEfficientPlatform.platform),"(",v.mostEfficientPlatform.efficiency.toFixed(1)," pts/share)"]})]})]})]}),a.platform_breakdown&&(0,t.jsxs)("div",{className:"platform-breakdown-section",children:[(0,t.jsx)("h4",{className:"platform-breakdown-title",children:"Platform Breakdown"}),(0,t.jsx)("div",{className:"platform-breakdown-grid",children:Object.entries(a.platform_breakdown).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"platform-breakdown-item",children:[(0,t.jsxs)("div",{className:"platform-breakdown-header",children:[(0,t.jsxs)("div",{className:"platform-breakdown-name-section",children:[(0,t.jsx)("span",{className:"platform-breakdown-icon",children:b.getPlatformIcon(a)}),(0,t.jsx)("h5",{className:"platform-breakdown-name",children:b.formatPlatformName(a)})]}),(0,t.jsxs)("span",{className:"platform-breakdown-percentage",children:[s.percentage.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"platform-breakdown-stats",children:[(0,t.jsxs)("div",{className:"platform-breakdown-stat",children:[(0,t.jsx)("span",{className:"platform-breakdown-stat-label",children:"Shares:"}),(0,t.jsx)("p",{className:"platform-breakdown-stat-value",children:s.shares})]}),(0,t.jsxs)("div",{className:"platform-breakdown-stat",children:[(0,t.jsx)("span",{className:"platform-breakdown-stat-label",children:"Points:"}),(0,t.jsx)("p",{className:"platform-breakdown-stat-value",children:s.points})]}),(0,t.jsxs)("div",{className:"platform-breakdown-stat",children:[(0,t.jsx)("span",{className:"platform-breakdown-stat-label",children:"First Share:"}),(0,t.jsx)("p",{className:"platform-breakdown-stat-value",children:s.first_share_date?g(s.first_share_date):"N/A"})]}),(0,t.jsxs)("div",{className:"platform-breakdown-stat",children:[(0,t.jsx)("span",{className:"platform-breakdown-stat-label",children:"Last Share:"}),(0,t.jsx)("p",{className:"platform-breakdown-stat-value",children:s.last_share_date?g(s.last_share_date):"N/A"})]})]}),(0,t.jsx)("div",{className:"platform-breakdown-progress",children:(0,t.jsx)("div",{className:"platform-breakdown-progress-bar",children:(0,t.jsx)("div",{className:"platform-breakdown-progress-fill",style:{width:"".concat(s.percentage,"%"),backgroundColor:b.getPlatformColor(a)}})})})]},a)})})]}),a.timeline.length>0&&(0,t.jsxs)("div",{className:"timeline-section",children:[(0,t.jsx)("h4",{className:"timeline-title",children:"Share Timeline"}),(0,t.jsx)("div",{className:"timeline-chart",children:(0,t.jsx)("div",{className:"timeline-grid",children:(a.timeline||[]).slice(-7).map((e,a)=>(0,t.jsxs)("div",{className:"timeline-day",children:[(0,t.jsx)("div",{className:"timeline-day-label",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})}),(0,t.jsxs)("div",{className:"timeline-day-data",children:[(0,t.jsx)("div",{className:"timeline-day-shares",children:e.shares}),(0,t.jsxs)("div",{className:"timeline-day-points",children:[e.points," pts"]})]})]},a))})})]})]})]})]})};s(6722);let N=()=>{let[e,a]=(0,n.useState)({subject:"",body:""}),[s,i]=(0,n.useState)({minPoints:0,status:"all",registrationDateRange:{start:"",end:""},includeAdmins:!1}),[r,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[d,p]=(0,n.useState)(null),[g,v]=(0,n.useState)(!1),[j,x]=(0,n.useState)(null),[b,f]=(0,n.useState)(""),w={welcome:{subject:"Welcome to LawVriksh!",body:"Dear {name},\n\nWelcome to LawVriksh! We're excited to have you on board.\n\nBest regards,\nThe LawVriksh Team"},update:{subject:"Important Update from LawVriksh",body:"Dear {name},\n\nWe have an important update to share with you.\n\n[Your update content here]\n\nBest regards,\nThe LawVriksh Team"},promotion:{subject:"Special Promotion for LawVriksh Members",body:"Dear {name},\n\nWe have a special promotion just for you!\n\n[Promotion details here]\n\nBest regards,\nThe LawVriksh Team"}};(0,n.useEffect)(()=>{N()},[s]);let N=async()=>{try{let e=100;"active"===s.status&&(e=Math.floor(.8*e)),"inactive"===s.status&&(e=Math.floor(.2*e)),s.minPoints>0&&(e=Math.floor(.6*e)),s.includeAdmins||(e=Math.floor(.95*e)),x(e)}catch(e){console.error("Failed to estimate recipients:",e)}},y=async()=>{if(!e.subject||!e.body)return void o("Please fill in both subject and body");try{l(!0),o(null),p(null);let t={subject:e.subject,body:e.body,min_points:s.minPoints},n=await m.sendBulkEmail(t);n&&(p("Email sent successfully to ".concat(n.recipients," recipients!")),a({subject:"",body:""}),f(""))}catch(e){o(e instanceof Error?e.message:"Failed to send bulk email")}finally{l(!1)}};return(0,t.jsxs)("div",{className:"bulk-email-container",children:[(0,t.jsxs)("div",{className:"bulk-email-header",children:[(0,t.jsx)("h3",{className:"bulk-email-title",children:"Enhanced Bulk Email Campaign"}),(0,t.jsx)("p",{className:"bulk-email-subtitle",children:"Send targeted emails to users based on various criteria"})]}),(0,t.jsxs)("div",{className:"bulk-email-content",children:[c&&(0,t.jsx)(h.A,{message:c}),d&&(0,t.jsx)("div",{className:"bulk-email-success",children:(0,t.jsxs)("div",{className:"bulk-email-success-content",children:[(0,t.jsx)("div",{className:"bulk-email-success-icon",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,t.jsx)("div",{className:"bulk-email-success-text",children:(0,t.jsx)("p",{className:"bulk-email-success-message",children:d})})]})}),(0,t.jsxs)("div",{className:"bulk-email-templates",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"Email Templates (Optional)"}),(0,t.jsxs)("select",{value:b,onChange:e=>(e=>{if(e&&w[e]){let s=w[e];a({subject:s.subject,body:s.body}),f(e)}})(e.target.value),className:"bulk-email-select",children:[(0,t.jsx)("option",{value:"",children:"Select a template..."}),(0,t.jsx)("option",{value:"welcome",children:"Welcome Email"}),(0,t.jsx)("option",{value:"update",children:"Important Update"}),(0,t.jsx)("option",{value:"promotion",children:"Special Promotion"})]})]}),(0,t.jsxs)("div",{className:"bulk-email-grid",children:[(0,t.jsxs)("div",{className:"bulk-email-form-section",children:[(0,t.jsxs)("div",{className:"bulk-email-form-group",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"Subject Line"}),(0,t.jsx)("input",{type:"text",value:e.subject,onChange:e=>a(a=>({...a,subject:e.target.value})),placeholder:"Enter email subject",className:"bulk-email-input",disabled:r})]}),(0,t.jsxs)("div",{className:"bulk-email-form-group",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"Email Body"}),(0,t.jsx)("textarea",{value:e.body,onChange:e=>a(a=>({...a,body:e.target.value})),placeholder:"Enter email content. Use {name}, {email}, {points} as placeholders.",rows:8,className:"bulk-email-textarea",disabled:r}),(0,t.jsxs)("p",{className:"bulk-email-placeholder-hint",children:["Available placeholders: ","{name}",", ","{email}",", ","{points}"]})]})]}),(0,t.jsxs)("div",{className:"bulk-email-filters",children:[(0,t.jsx)("h4",{className:"bulk-email-filters-title",children:"Recipient Filters"}),(0,t.jsxs)("div",{className:"bulk-email-form-group",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"Minimum Points"}),(0,t.jsx)("input",{type:"number",value:s.minPoints,onChange:e=>i(a=>({...a,minPoints:parseInt(e.target.value)||0})),min:"0",className:"bulk-email-input"})]}),(0,t.jsxs)("div",{className:"bulk-email-form-group",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"User Status"}),(0,t.jsxs)("select",{value:s.status,onChange:e=>i(a=>({...a,status:e.target.value})),className:"bulk-email-select",children:[(0,t.jsx)("option",{value:"all",children:"All Users"}),(0,t.jsx)("option",{value:"active",children:"Active Users Only"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive Users Only"})]})]}),(0,t.jsxs)("div",{className:"bulk-email-form-group",children:[(0,t.jsx)("label",{className:"bulk-email-label",children:"Registration Date Range"}),(0,t.jsxs)("div",{className:"bulk-email-date-grid",children:[(0,t.jsx)("input",{type:"date",value:s.registrationDateRange.start,onChange:e=>i(a=>({...a,registrationDateRange:{...a.registrationDateRange,start:e.target.value}})),className:"bulk-email-input"}),(0,t.jsx)("input",{type:"date",value:s.registrationDateRange.end,onChange:e=>i(a=>({...a,registrationDateRange:{...a.registrationDateRange,end:e.target.value}})),className:"bulk-email-input"})]})]}),(0,t.jsxs)("div",{className:"bulk-email-checkbox-group",children:[(0,t.jsx)("input",{type:"checkbox",id:"includeAdmins",checked:s.includeAdmins,onChange:e=>i(a=>({...a,includeAdmins:e.target.checked})),className:"bulk-email-checkbox"}),(0,t.jsx)("label",{htmlFor:"includeAdmins",className:"bulk-email-checkbox-label",children:"Include admin users"})]}),null!==j&&(0,t.jsx)("div",{className:"bulk-email-recipients-info",children:(0,t.jsxs)("p",{className:"bulk-email-recipients-text",children:[(0,t.jsx)("span",{className:"bulk-email-recipients-count",children:"Estimated Recipients:"})," ",j," users"]})})]})]}),(0,t.jsxs)("div",{className:"bulk-email-actions",children:[(0,t.jsx)("button",{onClick:()=>{v(!0)},disabled:!e.subject||!e.body,className:"bulk-email-button preview",children:"Preview Email"}),(0,t.jsx)("button",{onClick:y,disabled:r||!e.subject||!e.body,className:"bulk-email-button send",children:r?(0,t.jsxs)("div",{className:"bulk-email-button-content",children:[(0,t.jsx)(u.A,{size:"small"}),(0,t.jsx)("span",{className:"bulk-email-button-text",children:"Sending..."})]}):"Send Bulk Email"})]}),g&&(0,t.jsx)("div",{className:"bulk-email-modal-overlay",children:(0,t.jsx)("div",{className:"bulk-email-modal-container",children:(0,t.jsxs)("div",{className:"bulk-email-modal-content",children:[(0,t.jsx)("h3",{className:"bulk-email-modal-title",children:"Email Preview"}),(0,t.jsxs)("div",{className:"bulk-email-preview-container",children:[(0,t.jsxs)("div",{className:"bulk-email-preview-subject",children:[(0,t.jsx)("strong",{className:"bulk-email-preview-subject-label",children:"Subject:"}),(0,t.jsx)("p",{className:"bulk-email-preview-subject-text",children:e.subject})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"bulk-email-preview-body-label",children:"Body:"}),(0,t.jsx)("div",{className:"bulk-email-preview-body",children:e.body.replace(/{name}/g,"John Doe").replace(/{email}/g,"john.doe@example.com").replace(/{points}/g,"25")})]})]}),(0,t.jsxs)("div",{className:"bulk-email-modal-actions",children:[(0,t.jsx)("button",{onClick:()=>v(!1),className:"bulk-email-modal-button cancel",children:"Close Preview"}),(0,t.jsx)("button",{onClick:()=>{v(!1),y()},disabled:r,className:"bulk-email-modal-button send",children:"Send Email"})]})]})})})]})]})};var y=s(5967);s(9811);let k=e=>{let{onClose:a,onSuccess:s}=e,[i,r]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[l,c]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[j,x]=(0,n.useState)(null);n.useEffect(()=>{i.newPassword?x(y.y.checkPasswordStrength(i.newPassword)):x(null)},[i.newPassword]);let b=async e=>{if(e.preventDefault(),!i.currentPassword)return void d("Please enter your current password");if(!i.newPassword)return void d("Please enter a new password");if(i.newPassword!==i.confirmPassword)return void d("New passwords do not match");if(j&&!j.isValid)return void d("Please choose a stronger password");try{c(!0),d(null);let e=await y.y.changePassword(i.currentPassword,i.newPassword);e.success?(p(!0),r({currentPassword:"",newPassword:"",confirmPassword:""}),s&&setTimeout(()=>{s()},2e3)):d(e.message||"Failed to change password")}catch(e){d(e instanceof Error?e.message:"Failed to change password")}finally{c(!1)}},f=(e,a)=>{r(s=>({...s,[e]:a})),d(null)};return m?(0,t.jsx)("div",{className:"change-password-success",children:(0,t.jsxs)("div",{className:"change-password-success-content",children:[(0,t.jsx)("div",{className:"change-password-success-icon",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h3",{className:"change-password-success-title",children:"Password Changed Successfully"}),(0,t.jsx)("p",{className:"change-password-success-text",children:"Your password has been updated successfully."}),a&&(0,t.jsx)("button",{onClick:a,className:"change-password-success-button",children:"Close"})]})}):(0,t.jsxs)("div",{className:"change-password-container",children:[(0,t.jsx)("div",{className:"change-password-header",children:(0,t.jsxs)("div",{className:"change-password-header-content",children:[(0,t.jsx)("h3",{className:"change-password-title",children:"Change Password"}),a&&(0,t.jsx)("button",{onClick:a,className:"change-password-close",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("form",{onSubmit:b,className:"change-password-form",children:[o&&(0,t.jsx)(h.A,{message:o}),(0,t.jsxs)("div",{className:"change-password-form-group",children:[(0,t.jsx)("label",{htmlFor:"currentPassword",className:"change-password-label",children:"Current Password"}),(0,t.jsx)("div",{className:"change-password-input-wrapper",children:(0,t.jsx)("input",{id:"currentPassword",type:g?"text":"password",value:i.currentPassword,onChange:e=>f("currentPassword",e.target.value),className:"change-password-input",placeholder:"Enter your current password",disabled:l,required:!0})})]}),(0,t.jsxs)("div",{className:"change-password-form-group",children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"change-password-label",children:"New Password"}),(0,t.jsx)("div",{className:"change-password-input-wrapper",children:(0,t.jsx)("input",{id:"newPassword",type:g?"text":"password",value:i.newPassword,onChange:e=>f("newPassword",e.target.value),className:"change-password-input",placeholder:"Enter your new password",disabled:l,required:!0})}),j&&(0,t.jsxs)("div",{className:"change-password-strength",children:[(0,t.jsxs)("div",{className:"change-password-strength-bar-container",children:[(0,t.jsx)("div",{className:"change-password-strength-bar",children:(0,t.jsx)("div",{className:"change-password-strength-fill ".concat(j.score<=1?"weak":j.score<=2?"fair":j.score<=3?"good":"strong"),style:{width:"".concat(j.score/5*100,"%")}})}),(0,t.jsx)("span",{className:"change-password-strength-text ".concat(j.score<=1?"weak":j.score<=2?"fair":j.score<=3?"good":"strong"),children:j.feedback[0]||"Password strength"})]}),j.feedback.length>1&&(0,t.jsx)("div",{className:"change-password-feedback",children:j.feedback.slice(1).map((e,a)=>(0,t.jsx)("p",{className:"change-password-feedback-item",children:e},a))})]})]}),(0,t.jsxs)("div",{className:"change-password-form-group",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"change-password-label",children:"Confirm New Password"}),(0,t.jsx)("div",{className:"change-password-input-wrapper",children:(0,t.jsx)("input",{id:"confirmPassword",type:g?"text":"password",value:i.confirmPassword,onChange:e=>f("confirmPassword",e.target.value),className:"change-password-input",placeholder:"Confirm your new password",disabled:l,required:!0})}),i.confirmPassword&&i.newPassword!==i.confirmPassword&&(0,t.jsx)("p",{className:"change-password-mismatch",children:"Passwords do not match"})]}),(0,t.jsxs)("div",{className:"change-password-checkbox-group",children:[(0,t.jsx)("input",{type:"checkbox",id:"showPasswords",checked:g,onChange:e=>v(e.target.checked),className:"change-password-checkbox"}),(0,t.jsx)("label",{htmlFor:"showPasswords",className:"change-password-checkbox-label",children:"Show passwords"})]}),(0,t.jsxs)("div",{className:"change-password-actions",children:[a&&(0,t.jsx)("button",{type:"button",onClick:a,className:"change-password-button cancel",disabled:l,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:l||!i.currentPassword||!i.newPassword||!i.confirmPassword||i.newPassword!==i.confirmPassword||j&&!j.isValid,className:"change-password-button submit",children:l?(0,t.jsxs)("div",{className:"change-password-button-content",children:[(0,t.jsx)(u.A,{size:"small"}),(0,t.jsx)("span",{className:"change-password-button-text",children:"Changing..."})]}):"Change Password"})]})]})]})};var _=s(9284);s(3692);let S=()=>{let[e,a]=(0,n.useState)([]),[s,i]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1),[p,g]=(0,n.useState)(1),[v,j]=(0,n.useState)(1),[x,b]=(0,n.useState)({search:"",biggestHurdle:"",primaryMotivation:"",dateRange:null});(0,n.useEffect)(()=>{f(),w()},[p,x]);let f=async()=>{try{l(!0),o(null);let e={search:x.search||void 0,biggest_hurdle:x.biggestHurdle||void 0,primary_motivation:x.primaryMotivation||void 0,dateRange:x.dateRange||void 0},s=await _.D.getFeedbackList(p,20,e);a(s.feedback),j(s.pagination.totalPages)}catch(e){o(e.message||"Failed to load feedback data")}finally{l(!1)}},w=async()=>{try{let e=await _.D.getFeedbackStats();i(e)}catch(e){console.error("Failed to load feedback stats:",e)}},N=async()=>{try{m(!0);let e={search:x.search||void 0,biggest_hurdle:x.biggestHurdle||void 0,primary_motivation:x.primaryMotivation||void 0,dateRange:x.dateRange||void 0};await _.D.downloadFeedbackExport("json",e)}catch(e){o(e.message||"Failed to export feedback data")}finally{m(!1)}},y=(e,a)=>{b(s=>({...s,[e]:a})),g(1)},k=e=>({A:"Time commitment",B:"Simplifying topics",C:"Audience reach",D:"Ethics/compliance",E:"Other"})[e]||e,S=e=>({A:"Brand building",B:"Client attraction",C:"Revenue stream",D:"Education/contribution"})[e]||e;return r&&!e.length?(0,t.jsx)(u.A,{size:"large",message:"Loading feedback data..."}):(0,t.jsxs)("div",{className:"feedback-management",children:[(0,t.jsxs)("div",{className:"feedback-header",children:[(0,t.jsx)("h2",{children:"Feedback Management"}),(0,t.jsx)("div",{className:"feedback-actions",children:(0,t.jsx)("button",{onClick:N,disabled:d,className:"export-btn json-btn",children:d?"Exporting...":"Export JSON"})})]}),c&&(0,t.jsx)(h.A,{message:c,title:"Error",onRetry:f}),s&&(0,t.jsxs)("div",{className:"feedback-stats",children:[(0,t.jsx)("h3",{children:"Feedback Statistics"}),(0,t.jsxs)("div",{className:"stats-grid",children:[(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h4",{children:"Total Responses"}),(0,t.jsx)("p",{className:"stat-number",children:(null==s?void 0:s.total_responses)||0})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h4",{children:"Last 7 Days"}),(0,t.jsx)("p",{className:"stat-number",children:(null==s?void 0:s.responses_last_7_days)||0})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h4",{children:"Last 30 Days"}),(0,t.jsx)("p",{className:"stat-number",children:(null==s?void 0:s.responses_last_30_days)||0})]})]}),(0,t.jsxs)("div",{className:"breakdown-section",children:[(0,t.jsxs)("div",{className:"breakdown-item",children:[(0,t.jsx)("h4",{children:"Biggest Hurdles"}),(0,t.jsx)("div",{className:"breakdown-list",children:(null==s?void 0:s.responses_by_hurdle)?Object.entries(s.responses_by_hurdle).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"breakdown-row",children:[(0,t.jsx)("span",{children:k(a)}),(0,t.jsx)("span",{children:s})]},a)}):(0,t.jsx)("div",{children:"No data available"})})]}),(0,t.jsxs)("div",{className:"breakdown-item",children:[(0,t.jsx)("h4",{children:"Primary Motivations"}),(0,t.jsx)("div",{className:"breakdown-list",children:(null==s?void 0:s.responses_by_motivation)?Object.entries(s.responses_by_motivation).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"breakdown-row",children:[(0,t.jsx)("span",{children:S(a)}),(0,t.jsx)("span",{children:s})]},a)}):(0,t.jsx)("div",{children:"No data available"})})]})]})]}),(0,t.jsxs)("div",{className:"feedback-filters",children:[(0,t.jsx)("h3",{children:"Filters"}),(0,t.jsxs)("div",{className:"filters-grid",children:[(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{children:"Search"}),(0,t.jsx)("input",{type:"text",value:x.search,onChange:e=>y("search",e.target.value),placeholder:"Search in responses...",className:"filter-input"})]}),(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{children:"Biggest Hurdle"}),(0,t.jsxs)("select",{value:x.biggestHurdle,onChange:e=>y("biggestHurdle",e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"A",children:"Time commitment"}),(0,t.jsx)("option",{value:"B",children:"Simplifying topics"}),(0,t.jsx)("option",{value:"C",children:"Audience reach"}),(0,t.jsx)("option",{value:"D",children:"Ethics/compliance"}),(0,t.jsx)("option",{value:"E",children:"Other"})]})]}),(0,t.jsxs)("div",{className:"filter-group",children:[(0,t.jsx)("label",{children:"Primary Motivation"}),(0,t.jsxs)("select",{value:x.primaryMotivation,onChange:e=>y("primaryMotivation",e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"",children:"All"}),(0,t.jsx)("option",{value:"A",children:"Brand building"}),(0,t.jsx)("option",{value:"B",children:"Client attraction"}),(0,t.jsx)("option",{value:"C",children:"Revenue stream"}),(0,t.jsx)("option",{value:"D",children:"Education/contribution"})]})]}),(0,t.jsx)("div",{className:"filter-group",children:(0,t.jsx)("button",{onClick:()=>{b({search:"",biggestHurdle:"",primaryMotivation:"",dateRange:null}),g(1)},className:"clear-filters-btn",children:"Clear Filters"})})]})]}),(0,t.jsxs)("div",{className:"feedback-list",children:[(0,t.jsxs)("h3",{children:["Feedback Responses (",e.length," of ",(null==s?void 0:s.total_responses)||0,")"]}),r?(0,t.jsx)(u.A,{message:"Loading feedback..."}):0===e.length?(0,t.jsx)("div",{className:"no-feedback",children:(0,t.jsx)("p",{children:"No feedback responses found."})}):(0,t.jsx)("div",{className:"feedback-table",children:e.map(e=>(0,t.jsxs)("div",{className:"feedback-item",children:[(0,t.jsx)("div",{className:"feedback-item-header",children:(0,t.jsxs)("div",{className:"feedback-meta",children:[(0,t.jsxs)("span",{className:"feedback-id",children:["#",e.id]}),(0,t.jsx)("span",{className:"feedback-date",children:new Date(e.submitted_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.user_name&&(0,t.jsx)("span",{className:"feedback-user",children:e.user_name})]})}),(0,t.jsxs)("div",{className:"feedback-content",children:[(0,t.jsxs)("div",{className:"feedback-choices",children:[(0,t.jsxs)("div",{className:"choice-item",children:[(0,t.jsx)("strong",{children:"Biggest Hurdle:"})," ",k(e.biggest_hurdle),e.biggest_hurdle_other&&" (".concat(e.biggest_hurdle_other,")")]}),(0,t.jsxs)("div",{className:"choice-item",children:[(0,t.jsx)("strong",{children:"Primary Motivation:"})," ",S(e.primary_motivation||"")]})]}),(0,t.jsxs)("div",{className:"feedback-answers",children:[(0,t.jsxs)("div",{className:"answer-item",children:[(0,t.jsx)("strong",{children:"Monetization Considerations:"}),(0,t.jsx)("p",{children:e.monetization_considerations})]}),(0,t.jsxs)("div",{className:"answer-item",children:[(0,t.jsx)("strong",{children:"Professional Legacy:"}),(0,t.jsx)("p",{children:e.professional_legacy})]}),(0,t.jsxs)("div",{className:"answer-item",children:[(0,t.jsx)("strong",{children:"Platform Impact:"}),(0,t.jsx)("p",{children:e.platform_impact})]})]})]})]},e.id))}),v>1&&(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===p,className:"pagination-btn",children:"Previous"}),(0,t.jsxs)("span",{className:"pagination-info",children:["Page ",p," of ",v]}),(0,t.jsx)("button",{onClick:()=>g(e=>Math.min(v,e+1)),disabled:p===v,className:"pagination-btn",children:"Next"})]})]})]})};s(2575);let C=()=>{let{user:e,logout:a}=(0,i.A)(),s=(0,r.useRouter)(),c=function(){let[e,a]=(0,n.useState)("overview"),s=function(){let{data:e,loading:a,error:s,execute:t,reset:i}=(0,l.n5)(null),r=(0,n.useCallback)(async()=>await m.getDashboard(),[]),c=(0,n.useCallback)(()=>t(r),[t,r]);return(0,n.useEffect)(()=>{c()},[]),{dashboard:e,overview:(null==e?void 0:e.overview)||null,platformBreakdown:(null==e?void 0:e.platform_breakdown)||{},growthMetrics:(null==e?void 0:e.growth_metrics)||null,loading:a,error:s,refresh:c,reset:i}}(),t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:50,search:"",sort:"points"},[a,s]=(0,n.useState)(e),{data:t,pagination:i,loading:r,error:c,execute:o,reset:d}=(0,l.fj)([],null),u=(0,n.useCallback)(async e=>{let t={...a,...e};s(t);let n=await m.getUsers(t);return{data:n.users,pagination:n.pagination}},[a]),h=(0,n.useCallback)(()=>o(()=>u()),[o,u]),p=(0,n.useCallback)(e=>o(()=>u({page:e})),[o,u]),g=(0,n.useCallback)(e=>o(()=>u({page:1,search:e})),[o,u]),v=(0,n.useCallback)(e=>o(()=>u({page:1,sort:e})),[o,u]),j=(0,n.useCallback)(e=>o(()=>u({page:1,limit:e})),[o,u]);return(0,n.useEffect)(()=>{h()},[]),{users:t,pagination:i,loading:r,error:c,refresh:h,loadPage:p,search:g,sort:v,changePageSize:j,reset:d,currentParams:a}}(),i=function(){let{loading:e,error:a,execute:s,reset:t}=(0,l.FE)(),[i,r]=(0,n.useState)(null);return{sendBulkEmail:(0,n.useCallback)(async e=>{let a=await s(()=>m.sendBulkEmail(e));return a&&r(a),a},[s]),lastResult:i,loading:e,error:a,reset:t}}(),r=function(){let{loading:e,error:a,execute:s,reset:t}=(0,l.FE)(),[i,r]=(0,n.useState)(null);return{promoteUser:(0,n.useCallback)(async e=>{let a=await s(()=>m.promoteUser(e));return a&&r(a),a},[s]),lastPromoted:i,loading:e,error:a,reset:t}}(),c=function(){let{loading:e,error:a,execute:s,reset:t}=(0,l.FE)();return{exportUsers:(0,n.useCallback)(async(e,a)=>{let t=await s(()=>m.exportUsers(e,a));if(t){let a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="users.".concat(e),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}return t},[s]),loading:e,error:a,reset:t}}(),o=function(){let{data:e,loading:a,error:s,execute:t,reset:i}=(0,l.n5)(null),r=(0,n.useCallback)(async()=>await m.getAdminStats(),[]),c=(0,n.useCallback)(()=>t(r),[t,r]);return(0,n.useEffect)(()=>{c()},[]),{stats:e,totalUsers:(null==e?void 0:e.totalUsers)||0,activeUsers:(null==e?void 0:e.activeUsers)||0,totalShares:(null==e?void 0:e.totalShares)||0,totalPoints:(null==e?void 0:e.totalPoints)||0,topPlatform:(null==e?void 0:e.topPlatform)||"",loading:a,error:s,refresh:c,reset:i}}(),d=(0,n.useCallback)(()=>Promise.all([s.refresh(),t.refresh(),o.refresh()]),[s.refresh,t.refresh,o.refresh]);return{activeTab:e,setActiveTab:(0,n.useCallback)(e=>{switch(a(e),e){case"users":t.users.length||t.refresh();break;case"analytics":o.stats||o.refresh()}},[t,o]),dashboard:s,users:t,bulkEmail:i,userPromotion:r,userExport:c,stats:o,refreshAll:d,loading:s.loading||t.loading||o.loading,error:s.error||t.error||o.error}}();return(0,t.jsxs)("div",{className:"admin-dashboard",children:[(0,t.jsx)("header",{className:"admin-header",children:(0,t.jsxs)("div",{className:"admin-header-content",children:[(0,t.jsx)("h1",{children:"LawVriksh Admin Panel"}),(0,t.jsxs)("div",{className:"admin-user-info",children:[(0,t.jsxs)("span",{children:["Welcome, ",null==e?void 0:e.name]}),(0,t.jsx)("button",{onClick:()=>{a(),s.push("/admin/login")},className:"logout-btn",children:"Logout"})]})]})}),(0,t.jsxs)("nav",{className:"admin-nav",children:[(0,t.jsx)("button",{className:"overview"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("overview"),children:"Overview"}),(0,t.jsx)("button",{className:"users"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("users"),children:"Enhanced Users"}),(0,t.jsx)("button",{className:"email"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("email"),children:"Enhanced Email"}),(0,t.jsx)("button",{className:"analytics"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("analytics"),children:"Share Analytics"}),(0,t.jsx)("button",{className:"campaigns"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("campaigns"),children:"Campaigns"}),(0,t.jsx)("button",{className:"shares"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("shares"),children:"Share Analytics"}),(0,t.jsx)("button",{className:"feedback"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("feedback"),children:"Feedback"}),(0,t.jsx)("button",{className:"settings"===c.activeTab?"active":"",onClick:()=>c.setActiveTab("settings"),children:"Settings"})]}),(0,t.jsxs)("main",{className:"admin-main",children:["overview"===c.activeTab&&(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsx)("h2",{children:"Dashboard Overview"}),c.dashboard.loading?(0,t.jsx)(u.A,{size:"large",message:"Loading dashboard data..."}):c.dashboard.error?(0,t.jsx)(h.A,{message:c.dashboard.error,title:"Dashboard Error",onRetry:c.dashboard.refresh}):c.dashboard.overview?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"stats-grid",children:[(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h3",{children:"Total Users"}),(0,t.jsx)("p",{className:"stat-number",children:c.dashboard.overview.total_users})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h3",{children:"Active Users (24h)"}),(0,t.jsx)("p",{className:"stat-number",children:c.dashboard.overview.active_users_24h})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h3",{children:"Shares Today"}),(0,t.jsx)("p",{className:"stat-number",children:c.dashboard.overview.total_shares_today})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("h3",{children:"Points Distributed"}),(0,t.jsx)("p",{className:"stat-number",children:c.dashboard.overview.points_distributed_today})]})]}),(0,t.jsxs)("div",{className:"platform-breakdown",children:[(0,t.jsx)("h3",{children:"Platform Breakdown"}),(0,t.jsx)("div",{className:"platform-stats",children:Object.entries(c.dashboard.platformBreakdown).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"platform-item",children:[(0,t.jsx)("span",{className:"platform-name",children:a.charAt(0).toUpperCase()+a.slice(1)}),(0,t.jsxs)("span",{className:"platform-shares",children:[s.shares," shares"]}),(0,t.jsxs)("span",{className:"platform-percentage",children:[s.percentage,"%"]})]},a)})})]})]}):(0,t.jsx)(h.A,{message:"No dashboard data available",title:"No Data",variant:"info",onRetry:c.dashboard.refresh})]}),"users"===c.activeTab&&(0,t.jsx)("div",{className:"users-section",children:(0,t.jsx)(j,{})}),"email"===c.activeTab&&(0,t.jsx)("div",{className:"email-section",children:(0,t.jsx)(N,{})}),"analytics"===c.activeTab&&(0,t.jsx)("div",{className:"analytics-section",children:(0,t.jsx)(w,{})}),"campaigns"===c.activeTab&&(0,t.jsxs)("div",{className:"campaigns-section",children:[(0,t.jsx)("h2",{children:"Campaign Management"}),(0,t.jsx)(v,{})]}),"shares"===c.activeTab&&(0,t.jsx)("div",{className:"shares-section",children:(0,t.jsx)(w,{})}),"feedback"===c.activeTab&&(0,t.jsx)("div",{className:"feedback-section",children:(0,t.jsx)(S,{})}),"settings"===c.activeTab&&(0,t.jsxs)("div",{className:"settings-section",children:[(0,t.jsx)("h2",{children:"Admin Settings"}),(0,t.jsx)("div",{className:"settings-grid",children:(0,t.jsxs)("div",{className:"settings-card",children:[(0,t.jsx)("h3",{children:"Account Security"}),(0,t.jsx)(k,{})]})})]})]})]})};function P(){return(0,t.jsx)(C,{})}},6320:(e,a,s)=>{Promise.resolve().then(s.bind(s,6093))},6722:()=>{},6947:(e,a,s)=>{"use strict";s.d(a,{A:()=>l,O:()=>c});var t=s(5155),n=s(2115),i=s(5967);let r=(0,n.createContext)(void 0),l=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:a}=e,[s,l]=(0,n.useState)(null),[c,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{o(!0);try{if(i.y.isAuthenticated()){let e=await i.y.validateToken();l(e)}}catch(e){console.error("Auth initialization failed:",e),i.y.logout()}finally{o(!1)}})()},[]);let d=async(e,a)=>{o(!0);try{await i.y.login({email:e,password:a});let s=await i.y.getCurrentUser();return l(s),o(!1),!0}catch(e){return console.error("Login failed:",e),o(!1),!1}},m=()=>{i.y.logout(),l(null)},u=async()=>{try{if(i.y.isAuthenticated()){let e=await i.y.getCurrentUser();l(e)}}catch(e){console.error("Failed to refresh user:",e),m()}},h={user:s,isAuthenticated:!!s,isAdmin:!!(null==s?void 0:s.is_admin),login:d,logout:m,loading:c,refreshUser:u};return(0,t.jsx)(r.Provider,{value:h,children:a})}},7175:()=>{},9284:(e,a,s)=>{"use strict";s.d(a,{D:()=>i});var t=s(170);class n{async submitFeedback(e){var a,s,n,i,r;try{let s=await t.uE.post("/feedback/submit",e);if(200===s.status||201===s.status)return{success:!0,message:(null==(a=s.data)?void 0:a.message)||"Feedback submitted successfully"};throw Error("Unexpected response status")}catch(e){if(console.error("Failed to submit feedback:",e),(null==(s=e.response)?void 0:s.status)===400)throw Error((null==(r=e.response.data)?void 0:r.detail)||"Invalid feedback data");if((null==(n=e.response)?void 0:n.status)===429)throw Error("Too many submissions. Please try again later.");if((null==(i=e.response)?void 0:i.status)>=500)throw Error("Server error. Please try again later.");throw Error("Failed to submit feedback. Please check your connection and try again.")}}async getFeedbackList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2?arguments[2]:void 0;try{let n=new URLSearchParams({page:e.toString(),page_size:a.toString()});return(null==s?void 0:s.search)&&n.append("search",s.search),(null==s?void 0:s.biggestHurdle)&&n.append("biggest_hurdle",s.biggestHurdle),(null==s?void 0:s.primaryMotivation)&&n.append("primary_motivation",s.primaryMotivation),(null==s?void 0:s.dateRange)&&(n.append("start_date",s.dateRange.start),n.append("end_date",s.dateRange.end)),(await t.uE.get("/feedback?".concat(n))).data}catch(e){var n,i;if(console.error("Failed to fetch feedback list:",e),(null==(n=e.response)?void 0:n.status)===403)throw Error("Admin access required");if((null==(i=e.response)?void 0:i.status)===401)throw Error("Authentication required");throw Error("Failed to fetch feedback data")}}async getFeedbackStats(){try{return(await t.uE.get("/feedback/stats")).data}catch(s){var e,a;if(console.error("Failed to fetch feedback stats:",s),(null==(e=s.response)?void 0:e.status)===403)throw Error("Admin access required");if((null==(a=s.response)?void 0:a.status)===401)throw Error("Authentication required");throw Error("Failed to fetch feedback statistics")}}async exportFeedback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",a=arguments.length>1?arguments[1]:void 0;try{let s=new URLSearchParams({format:e});(null==a?void 0:a.search)&&s.append("search",a.search),(null==a?void 0:a.biggest_hurdle)&&s.append("biggest_hurdle",a.biggest_hurdle),(null==a?void 0:a.primary_motivation)&&s.append("primary_motivation",a.primary_motivation),(null==a?void 0:a.dateRange)&&(s.append("start_date",a.dateRange.start),s.append("end_date",a.dateRange.end));let t=await fetch("http://localhost:8000/feedback/export?".concat(s),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!t.ok){if(403===t.status)throw Error("Admin access required");if(401===t.status)throw Error("Authentication required");throw Error("Export failed")}return t.blob()}catch(e){throw console.error("Failed to export feedback:",e),e}}async downloadFeedbackExport(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",a=arguments.length>1?arguments[1]:void 0;try{let s=await this.exportFeedback(e,a),t=URL.createObjectURL(s),n=document.createElement("a");n.href=t,n.download="feedback_responses_".concat(new Date().toISOString().split("T")[0],".").concat(e),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}catch(e){throw console.error("Failed to download feedback export:",e),e}}validateFeedbackData(e){var a;let s={};e.biggest_hurdle||(s.biggestHurdle="Please select your biggest hurdle"),"E"!==e.biggest_hurdle||(null==(a=e.biggest_hurdle_other)?void 0:a.trim())||(s.biggestHurdleOther="Please specify your answer"),e.primary_motivation||(s.primaryMotivation="Please select your primary motivation"),e.time_consuming_part||(s.timeConsumingPart="Please select the most time-consuming part"),e.professional_fear||(s.professionalFear="Please select your biggest professional fear");let t=(e,a,t)=>{if(!(null==e?void 0:e.trim())){s[a]="Please provide your answer for ".concat(t);return}e.trim().length<10&&(s[a]="Please provide a more detailed answer for ".concat(t))};return e.monetization_considerations&&t(e.monetization_considerations,"monetizationConsiderations","monetization considerations"),e.professional_legacy&&t(e.professional_legacy,"professionalLegacy","professional legacy"),t(e.platform_impact,"platformImpact","platform impact"),{isValid:0===Object.keys(s).length,errors:s}}}let i=new n},9811:()=>{}},e=>{e.O(0,[9614,7674,9589,5967,4688,8441,5964,7358],()=>e(e.s=6320)),_N_E=e.O()}]);