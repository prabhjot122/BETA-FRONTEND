import{r as l,u as y,g as o,j as e,B as x,E as v,b as T}from"./index-DppsP5zJ.js";function _(a=null){const[p,r]=l.useState({data:a,loading:!1,error:null}),n=l.useCallback(async i=>{r(s=>({...s,loading:!0,error:null}));try{const s=await i();return r(N=>({...N,data:s,loading:!1,error:null})),s}catch(s){const N=s instanceof Error?s.message:"An unexpected error occurred";return r(E=>({...E,loading:!1,error:N})),null}},[]),d=l.useCallback(()=>{r({data:a,loading:!1,error:null})},[a]),m=l.useCallback(i=>{r(s=>({...s,data:i,error:null}))},[]),f=l.useCallback(i=>{r(s=>({...s,error:i,loading:!1}))},[]),h=l.useCallback(i=>{r(s=>({...s,loading:i}))},[]);return{state:p,execute:n,reset:d,setData:m,setError:f,setLoading:h}}function w({isOpen:a,onClose:p}){const r=y(),[n,d]=l.useState({name:"",email:""}),{state:m,execute:f}=_(),[h,i]=l.useState(!1);l.useEffect(()=>{a?(o.set(".waitlist-popup",{display:"flex"}),o.fromTo(".waitlist-popup__overlay",{opacity:0},{opacity:1,duration:.3,ease:"power2.out"}),o.fromTo(".waitlist-popup__content",{scale:.8,opacity:0,y:50},{scale:1,opacity:1,y:0,duration:.4,ease:"back.out(1.7)",delay:.1}),o.fromTo(".waitlist-popup__title",{opacity:0,y:30},{opacity:1,y:0,duration:.5,delay:.3}),o.fromTo(".waitlist-popup__description",{opacity:0,y:20},{opacity:1,y:0,duration:.5,delay:.4}),o.fromTo(".waitlist-popup__form-group",{opacity:0,y:20},{opacity:1,y:0,duration:.4,delay:.5,stagger:.1}),o.fromTo(".waitlist-popup__form-button",{opacity:0,scale:.9},{opacity:1,scale:1,duration:.4,delay:.7,ease:"back.out(1.7)"})):(o.to(".waitlist-popup__content",{scale:.8,opacity:0,y:50,duration:.3,ease:"power2.in"}),o.to(".waitlist-popup__overlay",{opacity:0,duration:.3,delay:.1,onComplete:()=>{o.set(".waitlist-popup",{display:"none"})}}))},[a]);const s=t=>{const{name:u,value:D}=t.target;d(c=>({...c,[u]:D}))},N=async t=>{t.preventDefault();try{const u="temp-password-"+Date.now();if(await f(()=>T.signup({name:n.name,email:n.email,password:u}))){console.log("✅ Signup successful, now logging in user...");try{const c=await T.login({email:n.email,password:u});console.log("✅ Auto-login successful after signup"),console.log("🎫 Login result:",c);const g=T.isAuthenticated();console.log("🔐 User authenticated after login:",g),g||console.error("❌ User not authenticated despite successful login")}catch(c){console.error("❌ Auto-login failed after signup:",c)}i(!0),o.fromTo(".waitlist-popup__success",{scale:0,opacity:0},{scale:1,opacity:1,duration:.5,ease:"back.out(1.7)"}),setTimeout(()=>{p(),i(!1);const c=n.name||"User";d({name:"",email:""}),r("/thank-you",{state:{userName:c}})},10)}}catch(u){console.error("Signup failed:",u)}},E=t=>{t.target===t.currentTarget&&p()},b=t=>{t.preventDefault(),t.stopPropagation(),p()};return l.useEffect(()=>{const t=u=>{u.key==="Escape"&&a&&p()};return a&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[a,p]),a?e.jsxDEV("div",{className:"waitlist-popup",onClick:E,onTouchEnd:E,children:[e.jsxDEV("div",{className:"waitlist-popup__overlay"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:187,columnNumber:7},this),e.jsxDEV("div",{className:"waitlist-popup__content",children:e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{className:"waitlist-popup__close",onClick:b,onTouchEnd:b,"aria-label":"Close popup",type:"button",children:"×"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:191,columnNumber:13},this),e.jsxDEV("div",{className:"waitlist-popup__header",children:[e.jsxDEV("h2",{className:"waitlist-popup__title",children:"Join the Waitlist"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:202,columnNumber:15},this),e.jsxDEV("p",{className:"waitlist-popup__description",children:["Be among the first to experience LawVriksh's AI-powered platform for legal professionals. Get early access and exclusive updates. ",e.jsxDEV("strong",{children:"Limited seats available"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:205,columnNumber:57},this)," – secure your spot in our exclusive beta program and join the select few shaping the future of legal technology."]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:203,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:201,columnNumber:13},this),e.jsxDEV("form",{className:"waitlist-popup__form",onSubmit:N,children:[e.jsxDEV("div",{className:"waitlist-popup__form-group",children:[e.jsxDEV("label",{htmlFor:"name",className:"waitlist-popup__label",children:"Full Name"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:212,columnNumber:17},this),e.jsxDEV("input",{type:"text",id:"name",name:"name",value:n.name,onChange:s,className:"waitlist-popup__input",required:!0,placeholder:"Enter your full name"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:213,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:211,columnNumber:15},this),e.jsxDEV("div",{className:"waitlist-popup__form-group",children:[e.jsxDEV("label",{htmlFor:"email",className:"waitlist-popup__label",children:"Email Address"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:226,columnNumber:17},this),e.jsxDEV("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,className:"waitlist-popup__input",required:!0,placeholder:"Enter your email address"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:227,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:225,columnNumber:15},this),e.jsxDEV("div",{className:"waitlist-popup__form-button",children:e.jsxDEV(x,{type:"submit",disabled:m.loading,size:"large",children:m.loading?"Joining...":"Join Waitlist"},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:240,columnNumber:17},this)},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:239,columnNumber:15},this),m.error&&e.jsxDEV(v,{message:m.error},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:210,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:190,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:188,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/Asus/Desktop/TESTING/BETA-FRONTEND/src/components/WaitlistPopup.tsx",lineNumber:182,columnNumber:5},this):null}export{w as default};
